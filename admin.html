<!DOCTYPE html>
<html>
<head>
    <title>RADIO 95 - DASHBOARD</title>
    <style>
        body { background: #111; color: #fff; font-family: sans-serif; padding: 20px; }
        .stat-card { background: #222; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 5px solid #FFD700; }
        #admin-logs { list-style: none; padding: 0; height: 300px; overflow-y: auto; background: #000; padding: 10px; }
        .log-item { border-bottom: 1px solid #333; padding: 5px; display: flex; justify-content: space-between; }
        button { background: #ff4444; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>üïπÔ∏è Panel Control Radio 95</h1>
    
    <div class="stat-card">
        <h2>Auditeurs en direct : <span id="count">0</span></h2>
    </div>

    <div class="stat-card">
        <h3>Flux du Tchat (Mod√©ration)</h3>
        <ul id="admin-logs"></ul>
    </div>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
        const socket = io('https://chatpublic-0eyd.onrender.com');
        const pass = "95ADMIN";

        socket.on('user count', (c) => document.getElementById('count').innerText = c);

        socket.on('chat message', (data) => {
            const li = document.createElement('li');
            li.className = 'log-item';
            li.innerHTML = `<span><b>${data.pseudo}:</b> ${data.text}</span> 
                            <button onclick="del('${data.id}')">SUPPRIMER</button>`;
            document.getElementById('admin-logs').prepend(li);
        });

        function del(id) {
            socket.emit('delete message', { messageId: id, password: pass });
        }
    </script>
</body>
</html>
